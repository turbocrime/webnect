<!doctype html>
<html lang="en">
	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<script type="module" src="src/main.ts"></script>
		<title>webnect demo</title>
	</head>

	<body>
		<div id="hello">
			<img
				src="https://github.com/turbocrime/webnect/assets/134443988/141bb8b5-fdf4-45a4-b58e-2f00b590fae8"
				alt="an image of the appropriate kinect"
			>
			<h1>
				<marquee id="no-usb">WebUSB not found</marquee>
				<marquee id="yes-usb" hidden>plug in your kinect</marquee>
			</h1>
			<h2>
				this page is a demo for
				<a href="https://github.com/turbocrime/webnect"
					>my WebUSB driver for the xbox360 kinect</a
				>
			</h2>
			<p>
				i have only tried this with my kinect. you can try it on yours if you
				like.
			</p>
			<fieldset id="requestDevices">
				<legend>
					<h3>
						<button id="connectUsb">Request Permission</button>
					</h3>
				</legend>
				<label>
					<input type="checkbox" id="motorCb" checked>
					Motor
				</label>
				<label>
					<input type="checkbox" id="cameraCb" checked>
					Camera
				</label>
				<label>
					<input type="checkbox" id="audioCb" disabled>
					Audio (not yet)
				</label>
			</fieldset>
			<video
				muted
				autoplay
				loop
				alt="a recorded video of some colorful depth data"
			>
				<source
					src="https://github.com/turbocrime/webnect/assets/134443988/40879425-cd91-4bae-a14f-633dc0f8d88c"
				>
			</video>
		</div>

		<div id="demo">
			<fieldset id="pairedDevices" hidden>
				<legend>
					<h3>Paired Devices</h3>
				</legend>
				<div id="pairedDeviceList"></div>
			</fieldset>

			<fieldset id="cameraDemo" hidden>
				<legend>
					<h2>Camera</h2>
				</legend>
				<canvas id="videoCanvas" width="640" height="480"></canvas>
				<canvas id="depthCanvas" width="640" height="480"></canvas>
			</fieldset>

			<fieldset id="motorDemo" hidden>
				<legend>
					<h2>Motor</h2>
				</legend>
				<fieldset id="ledDemo">
					<legend>
						<h3>LED</h3>
					</legend>
					<button id="ledInput">LED Color</button>
				</fieldset>
				<fieldset id="tiltDemo">
					<legend>
						<h3>Tilt</h3>
					</legend>
					<input
						id="tiltNumber"
						type="number"
						min="-30.5"
						max="30.5"
						step="0.5"
					>
					<input id="tiltSlider" type="range" min="-30.5" max="30.5" step="0.5">
					<table>
						<theadh>
							<th></th>
							<th>raw</th>
							<th>formatted</th>
						</theadh>

						<tr>
							<th>tilt</th>
							<td id="rawAngleDisplay"></td>
							<td id="angleDegreesDisplay"></td>
						</tr>

						<tr>
							<th>servo</th>
							<td id="rawServoDisplay"></td>
							<td id="servoDisplay"></td>
						</tr>

						<tr>
							<th>accel</th>
							<td id="rawAccelDisplay"></td>
							<td id="accelGDisplay"></td>
						</tr>
					</table>
				</fieldset>
			</fieldset>
		</div>
	</body>
</html>
